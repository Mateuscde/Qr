<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microfone com Filtro</title>
</head>
<body>
    <h1>Captura de Áudio com Filtro</h1>
    <button id="start">Ativar Microfone</button>
    <p id="status">Microfone desativado</p>

    <script>
        const startButton = document.getElementById('start');
        const statusText = document.getElementById('status');

        startButton.addEventListener('click', async () => {
            try {
                // Solicita permissão para acessar o microfone
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                statusText.textContent = 'Microfone ativado';

                const audioContext = new AudioContext();
                const source = audioContext.createMediaStreamSource(stream);

                // Aplicando filtro de redução de ruído (lowpass)
                const biquadFilter = audioContext.createBiquadFilter();
                biquadFilter.type = "lowpass";
                biquadFilter.frequency.setValueAtTime(1000, audioContext.currentTime); // Filtro passa-baixa

                // Conecta o filtro à saída de áudio
                source.connect(biquadFilter);
                biquadFilter.connect(audioContext.destination);

            } catch (err) {
                console.error('Erro ao acessar o microfone:', err);
                statusText.textContent = 'Erro ao acessar o microfone';
            }
        });
    </script>
</body>
</html>
